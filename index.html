<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>عروض نفـــــيسه !</title><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"><style>:root{--primary-color:#aa5555;--secondary-color:#FF9800;--accent-color:#4CAF50;--danger-color:#F44336;--background-color:#F8F9FA;--surface-color:#FFFFFF;--text-color:#212529;--subtle-text-color:#6C757D;--border-color:#DEE2E6;--sidebar-bg:#343A40;--sidebar-text:#DEE2E6;--shadow:0 4px 12px rgba(0,0,0,.1);--transition-speed:.3s;--button-grey:#E0E0E0;--button-grey-hover:#B0B0B0;--light-green:#90EE90}.flash-green{background-color:var(--light-green)!important;color:white!important}.flash-red{background-color:var(--danger-color)!important;color:white!important}body{font-family:'Cairo',sans-serif;line-height:1.6;margin:0;background-color:var(--background-color);color:var(--text-color);direction:rtl;text-align:right;padding-top:50px;padding-bottom:60px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input,textarea,button,select{font-family:'Cairo',sans-serif;}header{text-align: center; margin-bottom: 30px;}header h1{text-align:center;color:var(--primary-color);margin-bottom:0;padding-top:0;font-size:2.5rem;font-weight:700}@media (max-width:768px){header{margin-bottom: 20px;}header h1{font-size:2rem;margin-bottom:0;}}.sub-heading{text-align:center;color:var(--subtle-text-color);margin-top:5px;margin-bottom:30px;font-size:1.3rem;font-weight:400;}@media (max-width:768px){.sub-heading{margin-top:3px;margin-bottom:20px;font-size:1.1rem;}}#topControlsBar{position:fixed;top:0;left:0;right:0;z-index:990;background-color:var(--sidebar-bg);color:var(--sidebar-text);padding:8px 20px;display:flex;align-items:center;justify-content:space-between;box-shadow:var(--shadow);transition:background-color .3s ease,box-shadow .3s ease;}@media (max-width:768px){#topControlsBar{padding:6px 10px;}}#topControlsBar.item-added-glow{box-shadow:0 0 20px 8px rgba(76,175,80,.6);background-color:#4CAF50;}#topControlsBar.item-removed-flash{box-shadow:0 0 20px 8px rgba(244,67,54,.6);background-color:#C62828;}.mini-order-summary{background-color:transparent;color:var(--sidebar-text);padding:0;z-index:auto;box-shadow:none;display:flex;align-items:center;font-size:1rem;font-weight:600;transition:none;cursor:pointer;}.mini-order-summary i{margin-left:10px;font-size:1.2rem;color:var(--sidebar-text)}@media (max-width:768px){.mini-order-summary i{font-size:1rem}}.mini-order-summary span{margin:0 10px;}.mini-order-summary.empty-state{flex-grow:1;justify-content:center;}.mini-order-summary.empty-state span{text-align:center;margin:0;}.slideshow-container{max-width:1200px;margin:20px auto;position:relative;overflow:hidden;border-radius:8px;box-shadow:var(--shadow);height:250px;cursor:pointer;user-select:none}@media (max-width:768px){.slideshow-container{height:180px}}.mySlides{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .6s ease-in-out}.mySlides.active-slide{opacity:1}.prev,.next{display:none;}.dots-container{position:absolute;bottom:10px;left:0;right:0;text-align:center;z-index:6}.dot{cursor:pointer;height:10px;width:10px;margin:0 2px;background-color:#bbb;border-radius:50%;display:inline-block;transition:background-color .6s ease}.active-dot,.dot:hover{background-color:#717171}.horizontal-categories{position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;gap:10px;padding:8px 20px;background-color:var(--surface-color);box-shadow:var(--shadow);z-index:950;transition:opacity .3s ease-in-out,transform .3s ease-in-out,visibility .3s ease-in-out}.horizontal-categories::-webkit-scrollbar{display:none}.horizontal-categories{scrollbar-width:none}@media (max-width:768px){.horizontal-categories{padding:6px 10px;gap:8px;}}.categories-scroll-wrapper{flex-grow:1;overflow-x:auto;white-space:nowrap;display:flex;gap:10px;padding-top:5px;padding-bottom:5px;}.categories-scroll-wrapper::-webkit-scrollbar{display:none;}.categories-scroll-wrapper{scrollbar-width:none;}.search-icon-button{background-color:transparent;color:var(--text-color);border:none;padding:8px;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color var(--transition-speed) ease;}.search-icon-button:hover{background-color:var(--border-color);}@media (max-width:768px){.search-icon-button{padding:6px;font-size:1rem;}}.horizontal-categories .category-button{flex-shrink:0;background-color:var(--background-color);color:var(--text-color);border:1px solid var(--border-color);padding:8px 15px;font-size:.9rem;cursor:pointer;border-radius:20px;transition:background-color var(--transition-speed) ease,color var(--transition-speed) ease,border-color var(--transition-speed) ease}.horizontal-categories .category-button i{margin-left:8px}.horizontal-categories .category-button:hover{background-color:var(--border-color)}.horizontal-categories .category-button.active{background-color:var(--primary-color);color:white;border-color:var(--primary-color);font-weight:600;position:relative;box-shadow:0 2px 8px rgba(0,0,0,.15)}.horizontal-categories.hidden-bar{opacity:0;visibility:hidden;transform:translateY(100%)}.menu-toggle-button{background-color:transparent;color:white;padding:8px;border:none;border-radius:4px;cursor:pointer;font-size:1.2rem;font-weight:600;transition:background-color var(--transition-speed) ease;display:flex;align-items:center;justify-content:center;width:40px;height:40px;box-sizing:border-box;box-shadow:none;}.menu-toggle-button i{margin:0;font-size:1.5rem;}.menu-toggle-button:hover{background-color:rgba(255,255,255,0.1);}.container{max-width:1200px;margin:20px auto;padding:0 20px;position:relative}.main-wrapper{display:flex;gap:30px}@media (max-width:768px){.container{padding:0 10px}.main-wrapper{flex-direction:column;gap:20px}}.sidebar-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:98;background-color:rgba(0,0,0,.6);transition:opacity var(--transition-speed) ease;opacity:0}.sidebar-overlay.visible{display:block;opacity:1}.sidebar{position:fixed;top:0;right:-280px;width:280px;height:100%;background-color:var(--sidebar-bg);color:var(--sidebar-text);z-index:99;box-shadow:var(--shadow);transition:right var(--transition-speed) ease;padding:25px 15px;box-sizing:border-box;overflow-y:auto;display:flex;flex-direction:column}.sidebar.open{right:0}@media (max-width:768px){.sidebar{width:250px;right:-250px}.sidebar.open{right:0}}.sidebar .sidebar-search{position:relative; margin-bottom:15px;}.sidebar .sidebar-search input[type="text"]{margin-bottom:0;padding:10px;border:1px solid rgba(255,255,255,.2);border-radius:4px;background-color:rgba(255,255,255,.1);color:var(--sidebar-text);font-size:.9rem;width:calc(100% - 40px);box-sizing:border-box; padding-right: 35px;}.sidebar .sidebar-search input[type="text"]::placeholder{color:rgba(255,255,255,.5)}@media (max-width:768px){.sidebar .sidebar-search input[type="text"]{width:calc(100% - 34px);padding:8px;font-size:.8rem; padding-right: 30px;}}.sidebar .sidebar-search .search-icon{position:absolute; right: 10px; top: 50%; transform: translateY(-50%); color: rgba(255,255,255,.5); font-size: 1.1rem; pointer-events: none;}@media (max-width:768px){.sidebar .sidebar-search .search-icon{right: 8px; font-size: 1rem;}}.sidebar .sidebar-search .voice-search-button{position:absolute; left: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: rgba(255,255,255,.5); cursor: pointer; font-size: 1.1rem; padding: 5px; border-radius: 4px; transition: color .3s ease;}.sidebar .sidebar-search .voice-search-button:hover{color: rgba(255,255,255,.8);}.sidebar .sidebar-search .voice-search-button.active{color: var(--accent-color);}.close-sidebar-button{background:none;border:none;font-size:1.8rem;color:var(--sidebar-text);cursor:pointer;align-self:flex-start;margin-left:5px;margin-bottom:25px;transition:color var(--transition-speed) ease}.close-sidebar-button:hover{color:var(--danger-color)}.sidebar .category-title{font-size:1.2rem;font-weight:700;color:var(--subtle-text-color);margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.1);padding-right:10px}.sidebar .category-list{display:flex;flex-direction:column;gap:5px}.sidebar .category-list button{background-color:transparent;color:var(--sidebar-text);border:none;padding:14px 15px;font-size:1rem;cursor:pointer;text-align:right;transition:background-color var(--transition-speed) ease,color var(--transition-speed) ease;width:100%;border-radius:4px;display:flex;align-items:center;justify-content:flex-start}.sidebar .category-list button i{margin-left:10px}.sidebar .category-list button:hover{background-color:rgba(255,255,255,.08);color:white}.sidebar .category-list button.active{background-color:var(--primary-color);color:white;font-weight:700;position:relative;box-shadow:0 2px 8px rgba(0,0,0,.15)}.content-area{flex-grow:1;padding-top:0}.controls-above-products{background-color:var(--surface-color);padding:20px;margin-bottom:30px;border-radius:8px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:20px;margin-top:20px}@media (max-width:768px){.controls-above-products{padding:15px;gap:10px}}.search-bar{display:flex;align-items:center;position:relative}.search-bar input{flex-grow:1;padding:12px 15px;padding-right:40px;border:1px solid var(--border-color);border-radius:4px;font-size:1rem;margin-left:10px;box-sizing:border-box;transition:border-color var(--transition-speed) ease}.search-bar input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 .2rem rgba(170,85,85,.25)}@media (max-width:768px){.search-bar input{font-size:.9rem;padding:10px 12px;padding-right:35px}}.search-bar .search-icon{position:absolute; right: 20px; color:var(--subtle-text-color);font-size:1.1rem; pointer-events: none;}@media (max-width:768px){.search-bar .search-icon{right:15px}}.search-bar .voice-search-button{position:absolute; left: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--subtle-text-color); cursor: pointer; font-size: 1.1rem; padding: 5px; border-radius: 4px; transition: color .3s ease;}.search-bar .voice-search-button:hover{color: var(--text-color);}.search-bar .voice-search-button.active{color: var(--accent-color);}.sort-controls{display:flex;align-items:center;gap:15px;font-size:1rem}.sort-controls label{font-weight:600;color:var(--text-color)}.sort-controls select{padding:10px 15px;border:1px solid var(--border-color);border-radius:4px;font-size:1rem;cursor:pointer;background-color:var(--background-color);transition:border-color var(--transition-speed) ease;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20256%20448%22%20enable-background%3D%22new%200%200%20256%20448%22%3E%3Cpath%20fill%3D%22%23212529%22%20d%3D%22M255.9%20168c0-4.2-1.7-8.3-4.7-11.3l-114.2-114.2c-6.2-6.2-16.4-6.2-22.6%200L5.5%20156.7c-6.2%206.2-6.2%2016.4%200%2022.6%206.2%206.2%2016.4%206.2%2022.6%200l91.4-91.4%2091.4%2091.4c6.2%206.2%2016.4%206.2%2022.6%200C254.2%20176.3%20255.9%20172.2%20255.9%20168z%22%2F%3E%3Cpath%20fill%3D%22%23212529%22%20d%3D%22M255.9%20280c0%204.2-1.7%208.3-4.7%2011.3l-114.2%20114.2c-6.2%206.2-16.4%206.2-22.6%200L5.5%20291.3c-6.2-6.2-6.2-16.4%200-22.6%206.2-6.2%2016.4-6.2%2022.6%200l91.4%2091.4%2091.4-91.4c6.2-6.2%2016.4%206.2%2022.6%200C254.2%20271.7%20255.9%20275.8%20255.9%20280z%22%2F%3E%3C%2Fsvg%3E');background-repeat:no-repeat;background-position:calc(100% - 10px) center;background-size:10px 10px;padding-left:30px;border-color:var(--subtle-text-color)}.sort-controls select:focus{outline:none;border-color:var(--primary-color)}.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px;margin-bottom:40px}@media (max-width:768px){.products-grid{grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px}}.product-item{background-color:var(--surface-color);border:1px solid var(--border-color);border-radius:8px;padding:20px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.08);display:flex;flex-direction:column;justify-content:space-between;transition:transform var(--transition-speed) ease,box-shadow var(--transition-speed) ease,opacity var(--transition-speed) ease;}.product-item:hover{transform:translateY(-5px);box-shadow:var(--shadow)}.product-item.hidden{display:none}@media (max-width:768px){.product-item{padding:15px}}.product-item img{max-width:100%;height:180px;object-fit:cover;border-radius:4px;margin:0 auto 15px auto;cursor:pointer;}@media (max-width:768px){.product-item img{height:120px;margin-bottom:10px}}.product-name{font-weight:700;margin-bottom:8px;flex-grow:1;color:var(--text-color);font-size:1.1rem; cursor:pointer;}@media (max-width:768px){.product-name{font-size:1rem;margin-bottom:5px}}.product-description{font-size:.9rem;color:var(--subtle-text-color);margin-bottom:15px;flex-grow:1;text-align:center; cursor:pointer;}.product-item[data-product-name="منتج فاخر"] .product-description{display:block;}@media (max-width:768px){.product-description{font-size:.85rem;margin-bottom:10px}}.product-price{color:var(--accent-color);font-size:1.3rem;font-weight:700;margin-bottom:15px; cursor:pointer;}@media (max-width:768px){.product-price{font-size:1.1rem;margin-bottom:10px}}.quantity-control{display:flex;justify-content:center;align-items:center;margin-bottom:15px}@media (max-width:768px){.quantity-control{margin-bottom:10px}}.quantity-control button{width:35px;height:35px;padding:0;margin:0 4px;font-size:1.3rem;line-height:1;background-color:var(--button-grey);color:var(--text-color);border:none;border-radius:4px;cursor:pointer;transition:background-color var(--transition-speed) ease;display:flex;justify-content:center;align-items:center}.quantity-control button:hover{background-color:var(--button-grey-hover)}@media (max-width:768px){.quantity-control button{width:30px;height:30px;font-size:1.2rem;margin:0 3px}}.quantity-input{width:50px;text-align:center;border:1px solid var(--border-color);border-radius:4px;margin:0 5px;padding:6px 0;font-size:1.1rem;-moz-appearance:textfield;}.quantity-input::-webkit-outer-spin-button,.quantity-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.product-notes{width:calc(100% - 10px);margin:10px auto 0 auto;padding:8px;border:1px solid var(--border-color);border-radius:4px;font-size:.9rem;resize:vertical;min-height:60px;box-sizing:border-box;}.product-notes:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 .2rem rgba(170,85,85,.25)}@media (max-width:768px){.product-notes{width:calc(100% - 10px);padding:6px;font-size:.8rem;min-height:50px}}.order-summary{margin-bottom:30px;background-color:var(--surface-color);border-radius:8px;box-shadow:var(--shadow);}.summary-toggle-button{width:100%;padding:15px 20px;background-color:var(--primary-color);color:white;border:none;border-radius:8px;cursor:pointer;font-size:1.2rem;text-align:right;margin-bottom:0;display:flex;justify-content:space-between;align-items:center;font-weight:700;transition:background-color var(--transition-speed) ease,box-shadow var(--transition-speed) ease;}.summary-toggle-button i{margin-right:10px;transition:transform .3s ease;transform:rotate(180deg);}.summary-toggle-button.collapsed i{transform:rotate(0deg);}.summary-toggle-button:hover{background-color:#884444}.summary-toggle-button span{display:block;}.summary-toggle-button span:last-child{display:none;}#collapsibleSummaryContent{display:none;overflow:visible;transition:none;padding:20px;border:1px solid var(--border-color);border-top:none;background-color:var(--surface-color);box-sizing:border-box;border-radius:0 0 8px 8px;}@media (max-width:768px){#collapsibleSummaryContent{padding:15px;border-radius:0 0 8px 8px;}}.order-summary.open #collapsibleSummaryContent{display:block;}.order-summary h2{margin-top:0;color:var(--text-color);margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.selected-items-list{margin-top:15px;border-top:1px solid var(--border-color);padding-top:15px}.summary-item{display:flex;align-items:center;padding:12px 0;border-bottom:1px solid var(--border-color);justify-content:space-between;position:relative;}.summary-item:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0;}.summary-item img{width:60px;height:60px;object-fit:cover;border-radius:4px;margin-left:15px;border:1px solid var(--border-color)}@media (max-width:768px){.summary-item img{width:40px;height:40px;margin-left:10px}}.summary-item-details{flex-grow:1;margin-right:15px}@media (max-width:768px){.summary-item-details{margin-right:10px}}.summary-item-details span{display:block;margin-bottom:4px;}.summary-item .item-name{font-weight:700;color:var(--text-color); font-family: 'Cairo', sans-serif;}@media (max-width:768px){.summary-item .item-name{font-size:1em}}.summary-item .item-quantity{font-weight:normal;color:var(--subtle-text-color);font-size:.95em;}.summary-item .item-subtotal{font-weight:700;color:var(--accent-color);font-size:1.1em;margin-top:5px;}@media (max-width:768px){.summary-item .item-subtotal{font-size:1em}}.summary-item .quantity-control{margin:0 10px;}.summary-item .quantity-control button{width:35px; height: 35px; font-size: 1.3rem; margin:0 4px; animation: pulse-button 1s infinite alternate;} @keyframes pulse-button { from { opacity: 0.8; } to { opacity: 1; } } @media (max-width:768px){.summary-item .quantity-control button{width:30px; height: 30px; font-size:1.2rem; margin:0 3px;}}.summary-item .quantity-input{width:50px; font-size: 1.1rem;} @media (max-width:768px){.summary-item .quantity-input{width:35px; font-size:.9rem;}}.zero-quantity{background-color:var(--danger-color);color:white;border:none;border-radius:4px;width:35px; height:35px; font-size:1.2rem; cursor:pointer;display:flex;justify-content:center;align-items:center;transition:background-color var(--transition-speed) ease;margin-right:5px; margin-left: 0;}.zero-quantity:hover{background-color:#E53935}@media (max-width:768px){.zero-quantity{width:30px; height:30px; font-size:1.1rem; margin-right:3px; margin-left: 0;}}.delivery-fee,.free-delivery-message-summary{font-size:1.2rem;font-weight:600;color:var(--subtle-text-color);text-align:center;margin-top:10px;padding-top:10px;border-top:1px dashed var(--border-color);}.free-delivery-message-summary{color:var(--accent-color);}.total-price{font-size:1.6rem;font-weight:700;text-align:center;color:var(--accent-color);margin-top:15px;padding-top:20px;border-top:1px solid var(--border-color);}.form label{margin-bottom:10px;font-weight:600;color:var(--text-color);font-size:1.1rem;}@media (max-width:768px){.delivery-fee,.free-delivery-message-summary{font-size:1rem;margin-top:5px;padding-top:5px;}.total-price{font-size:1.3rem;margin-top:10px;padding-top:15px;}}form{display:flex;flex-direction:column;max-width:600px;margin:30px auto;padding:35px;border:1px solid var(--border-color);border-radius:8px;background-color:var(--surface-color);box-shadow:var(--shadow);}@media (max-width:768px){form{padding:20px;margin:20px auto}form label{font-size:1rem;margin-bottom:5px}}form input[type="text"],form input[type="email"]{margin-bottom:25px;padding:12px 15px;border:1px solid var(--border-color);border-radius:4px;font-size:1rem;width:calc(100% - 30px);box-sizing:border-box;transition:border-color var(--transition-speed) ease;}@media (max-width:768px){form input[type="text"],form input[type="email"]{padding:10px 12px;margin-bottom:15px;width:calc(100% - 24px)}}form input[type="text"]:focus,form input[type="email"]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 .2rem rgba(170,85,85,.25)}form textarea#message{display:none}form label[for="message"]{display:none}button[type="submit"]{padding:14px 25px;background-color:var(--accent-color);color:white;border:none;border-radius:4px;cursor:pointer;font-size:1.2rem;transition:background-color var(--transition-speed) ease,box-shadow var(--transition-speed) ease;margin-top:10px;font-weight:600;}.button[type="submit"]:hover{background-color:#45A049;box-shadow:var(--shadow)}@media (max-width:768px){button[type="submit"]{padding:10px 15px;font-size:1.1rem}}#response{margin-top:30px;text-align:center;font-weight:600;padding:15px;border-radius:4px;min-height:1.5em;transition:all var(--transition-speed) ease;}.success{color:#1B5E20;background-color:#E8F5E9;border:1px solid #A5D6A7}.error{color:#B71C1C;background-color:#FFEBEE;border:1px solid #EF9A9A}.free-delivery-alert-overlay,.image-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;}.free-delivery-alert-overlay.visible,.image-modal-overlay.visible{opacity:1;visibility:visible;}.free-delivery-alert-box,.image-modal-content{background-color:var(--surface-color);padding:30px;border-radius:8px;box-shadow:var(--shadow);text-align:center;max-width:400px;width:90%;position:relative;transform:scale(0.9);transition:transform .3s ease;}.free-delivery-alert-overlay.visible .free-delivery-alert-box,.image-modal-overlay.visible .image-modal-content{transform:scale(1);}.image-modal-content{max-width:90%;max-height:90%;padding:20px; display: flex; flex-direction: column; align-items: center; gap: 10px; overflow-y: auto;}.free-delivery-alert-box .close-button,.image-modal-content .modal-close-button{position:absolute;top:10px;left:10px;font-size:1.5rem;font-weight:bold;color:var(--subtle-text-color);border:none;background:none;cursor:pointer;}.free-delivery-alert-box .close-button:hover,.image-modal-content .modal-close-button:hover{color:var(--text-color);}.image-modal-content img{display:block;max-width:100%;max-height:40vh;object-fit:contain;margin:0 auto; border-radius: 4px; border: 1px solid var(--border-color);}.image-modal-details { text-align: center; color: var(--text-color); width: 100%; margin-bottom: 10px;}.image-modal-details h3 { margin: 0 0 5px 0; font-size: 1.4rem; color: var(--primary-color);}.image-modal-details p { margin: 0 0 5px 0; font-size: 1rem; color: var(--subtle-text-color);}.image-modal-details .modal-price { font-size: 1.2rem; font-weight: 700; color: var(--accent-color);}.image-modal-content .modal-description { font-size: 0.9rem; color: var(--subtle-text-color); margin: 0 0 10px 0; text-align: center;}.image-modal-content .quantity-control { margin-top: 0; margin-bottom: 10px;}.image-modal-content .product-notes { margin-top: 0; width: calc(100% - 20px); margin-bottom: 0;}
.free-delivery-alert-box i.fa-gift{font-size:3rem;color:var(--accent-color);margin-bottom:15px;}.free-delivery-alert-box h3{color:var(--text-color);margin-top:0;font-size:1.8rem;margin-bottom:10px;}.free-delivery-alert-box p{color:var(--accent-color);font-size:1.3rem;font-weight:700;margin-bottom:0;}.summary-item.item-suspended .item-name{text-decoration:line-through;color:#777}.summary-item.item-suspended img,.summary-item.item-suspended .summary-item-details>*:not(.item-name),.summary-item.item-suspended .quantity-control{filter:grayscale(100%);opacity:.6}.summary-item.item-suspended .summary-item-details .item-subtotal,.summary-item.item-suspended .summary-item-details .item-quantity{color:#999!important}.summary-item .item-actions{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:5px;margin-right:5px;margin-left:0}.summary-item .item-actions button{background-color:var(--button-grey);color:var(--text-color);border:none;border-radius:4px;width:35px;height:35px;font-size:1.1rem;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:background-color var(--transition-speed) ease;padding:0}.summary-item .item-actions button:hover{background-color:var(--button-grey-hover)}.summary-item .item-actions .suspend-item-button{background-color:var(--danger-color);color:white}.summary-item .item-actions .suspend-item-button:hover{background-color:#C62828}.summary-item .item-actions .undo-suspend-button{background-color:var(--accent-color);color:white}.summary-item .item-actions .undo-suspend-button:hover{background-color:#45a049}.summary-item .item-actions .confirm-final-delete-button{background-color:var(--danger-color);color:white}.summary-item .item-actions .confirm-final-delete-button:hover{background-color:#E53935}.confirm-delete-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.75);display:flex;justify-content:center;align-items:center;z-index:1050;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;backdrop-filter:blur(5px)}.confirm-delete-modal-overlay.visible{opacity:1;visibility:visible}.confirm-delete-modal-content{background:linear-gradient(135deg,var(--surface-color) 0%,#e9e9e9 100%);padding:35px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);text-align:center;max-width:420px;width:90%;position:relative;transform:scale(.8) translateY(20px);transition:transform .3s cubic-bezier(.175,.885,.32,1.275),opacity .3s ease;border:1px solid var(--border-color);}.confirm-delete-modal-overlay.visible .confirm-delete-modal-content{transform:scale(1) translateY(0);opacity:1}.confirm-delete-modal-content h3{font-family:'Cairo',sans-serif;color:var(--primary-color);margin-top:0;font-size:1.7rem;margin-bottom:25px;font-weight:700}.confirm-delete-modal-content .modal-buttons{display:flex;justify-content:space-around;margin-top:30px}.confirm-delete-modal-content .modal-buttons button{padding:12px 25px;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:600;min-width:120px;transition:all .3s ease;box-shadow:0 2px 5px rgba(0,0,0,.1);}.confirm-delete-modal-content .modal-buttons button:hover{transform:translateY(-2px);box-shadow:0 4px 10px rgba(0,0,0,.15)}.confirm-delete-modal-content .modal-confirm-yes{background-color:var(--danger-color);color:white;border:none}.confirm-delete-modal-content .modal-confirm-yes:hover{background-color:#D32F2F}.confirm-delete-modal-content .modal-confirm-no{background-color:var(--button-grey);color:var(--text-color);border:1px solid var(--border-color)}.confirm-delete-modal-content .modal-confirm-no:hover{background-color:var(--button-grey-hover);border-color:#aaa}.summary-item .item-actions button i{margin:0}
@media (max-width:768px){.summary-item .item-actions button{width:30px;height:30px;font-size:1rem}.confirm-delete-modal-content{padding:25px}.confirm-delete-modal-content h3{font-size:1.4rem}.confirm-delete-modal-content .modal-buttons button{padding:10px 20px;font-size:1rem;min-width:100px}}
</style></head><body><div id="topControlsBar"><button id="menuToggleButton" class="menu-toggle-button" title="عرض أقسام المنتجات"><i class="fas fa-bars"></i></button><div id="miniOrderSummary" class="mini-order-summary"><i class="fas fa-shopping-cart"></i><span>اترس بيتك بدون ما تفرغ جيبك !</span></div></div><header><h1>عروض نفـــــيسه !</h1><h2 class="sub-heading">للعروض الخاصه و الاسعار التنافسيه !</h2></header><div class="slideshow-container"><img class="mySlides" src="https://picsum.photos/id/1069/1200/250" alt="Slide 1"><img class="mySlides" src="https://picsum.photos/id/1074/1200/250" alt="Slide 2"><img class="mySlides" src="https://picsum.photos/id/1080/1200/250" alt="Slide 3"><a class="prev" onclick="plusSlides(-1)">&#10094;</a><a class="next" onclick="plusSlides(1)">&#10095;</a><div class="dots-container"><span class="dot" onclick="currentSlide(1)"></span><span class="dot" onclick="currentSlide(2)"></span><span class="dot" onclick="currentSlide(3)"></span></div></div><div class="sidebar-overlay" id="sidebarOverlay"></div><div class="container"><div class="main-wrapper"><div class="sidebar" id="sidebar"><button id="closeSidebarButton" class="close-sidebar-button">X</button><div class="sidebar-search"><i class="fas fa-search search-icon"></i><input type="text" id="sidebarProductSearchInput" placeholder="ابحث في المنتجات..."><button class="voice-search-button" id="sidebarVoiceSearchButton" title="البحث بالصوت"><i class="fas fa-microphone"></i></button></div><div class="sidebar-categories"><div class="category-title">الأقسام</div><div class="category-list" id="categoryList"><button class="category-button active" data-category="all"><i class="fas fa-list"></i>الكل</button><button class="category-button" data-category="electronics"><i class="fas fa-laptop"></i>إلكترونيات</button><button class="category-button" data-category="home"><i class="fas fa-home"></i>منزل ومطبخ</button><button class="category-button" data-category="fashion"><i class="fas fa-tshirt"></i>موضة وإكسسوارات</button><button class="category-button" data-category="books"><i class="fas fa-book"></i>كتب وهوايات</button><button class="category-button" data-category="sports"><i class="fas fa-dumbbell"></i>رياضة</button><button class="category-button" data-category="tools"><i class="fas fa-tools"></i>أدوات</button><button class="category-button" data-category="beauty"><i class="fas fa-spa"></i>جمال وعناية</button><button class="category-button" data-category="art"><i class="fas fa-paint-brush"></i>فن وديكور</button></div></div></div><div class="content-area" id="contentArea"><div class="controls-above-products"><div class="search-bar"><i class="fas fa-search search-icon"></i><input type="text" id="searchInput" placeholder="ابحث في المنتجات..."><button class="voice-search-button" id="mainVoiceSearchButton" title="البحث بالصوت"><i class="fas fa-microphone"></i></button></div><div class="sort-controls"><label for="sortSelect">ترتيب حسب:</label><select id="sortSelect"><option value="default">الاختيار الافتراضي</option><option value="price-asc">السعر: من الأقل للأعلى</option><option value="price-desc">السعر: من الأعلى للأقل</option><option value="name-asc">الاسم: أ - ي</option><option value="name-desc">الاسم: ي - أ</option></select></div></div><div class="products-grid" id="productsGrid"><div class="product-item" data-product-name="سماعات لاسلكية فاخرة" data-price="299" data-image-id="101" data-category="electronics" data-description="جودة صوت عالية وتصميم أنيق، بطارية تدوم طويلاً."><img src="https://picsum.photos/id/101/300/150" alt="سماعات لاسلكية فاخرة"><span class="product-name">سماعات لاسلكية فاخرة</span><p class="product-description">جودة صوت عالية وتصميم أنيق، بطارية تدوم طويلاً.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 388.7 دينار عراقي</span> <br>السعر: 299 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="ساعة ذكية رياضية" data-price="450" data-image-id="102" data-category="electronics" data-description="تتبع النشاط البدني ومعدل ضربات القلب، مقاومة للماء."><img src="https://picsum.photos/id/102/300/150" alt="ساعة ذكية رياضية"><span class="product-name">ساعة ذكية رياضية</span><p class="product-description">تتبع النشاط البدني ومعدل ضربات القلب، مقاومة للماء.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 585 دينار عراقي</span> <br>السعر: 450 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="كاميرا رقمية مدمجة" data-price="650" data-image-id="103" data-category="electronics" data-description="كاميرا عالية الجودة لالتقاط أجمل اللحظات بسهولة."><img src="https://picsum.photos/id/103/300/150" alt="كاميرا رقمية مدمجة"><span class="product-name">كاميرا رقمية مدمجة</span><p class="product-description">كاميرا عالية الجودة لالتقاط أجمل اللحظات بسهولة.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 845 دينار عراقي</span> <br>السعر: 650 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="جهاز لوحي متعدد الاستخدامات" data-price="899" data-image-id="104" data-category="electronics" data-description="جهاز لوحي مثالي للعمل والدراسة والترفيه بشاشة واضحة."><img src="https://picsum.photos/id/104/300/150" alt="جهاز لوحي متعدد الاستخدامات"><span class="product-name">جهاز لوحي متعدد الاستخدامات</span><p class="product-description">جهاز لوحي مثالي للعمل والدراسة والترفيه بشاشة واضحة.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 1168.7 دينار عراقي</span> <br>السعر: 899 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="لعبة فيديو مشوقة" data-price="199" data-image-id="112" data-category="electronics" data-description="انغمس في عالم الإثارة والمغامرات مع هذه اللعبة."><img src="https://picsum.photos/id/112/300/150" alt="لعبة فيديو مشوقة"><span class="product-name">لعبة فيديو مشوقة</span><p class="product-description">انغمس في عالم الإثارة والمغامرات مع هذه اللعبة.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 258.7 دينار عراقي</span> <br>السعر: 199 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="شاحن محمول سريع" data-price="110" data-image-id="121" data-category="electronics" data-description="شاحن صغير الحجم وعالي الأداء لشحن أجهزتك بسرعة."><img src="https://picsum.photos/id/121/300/150" alt="شاحن محمول سريع"><span class="product-name">شاحن محمول سريع</span><p class="product-description">شاحن صغير الحجم وعالي الأداء لشحن أجهزتك بسرعة.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 143 دينار عراقي</span> <br>السعر: 110 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="ماكينة صنع القهوة الأوتوماتيكية" data-price="320" data-image-id="110" data-category="home" data-description="تصنع قهوة رائعة بلمسة زر، سهلة التنظيف."><img src="https://picsum.photos/id/110/300/150" alt="ماكينة صنع القهوة الأوتوماتيكية"><span class="product-name">ماكينة صنع القهوة الأوتوماتيكية</span><p class="product-description">تصنع قهوة رائعة بلمسة زر، سهلة التنظيف.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 416 دينار عراقي</span> <br>السعر: 320 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="نبات زينة داخلي" data-price="75" data-image-id="113" data-category="home" data-description="يضيف لمسة من الجمال الطبيعي والحيوية إلى أي مكان."><img src="https://picsum.photos/id/113/300/150" alt="نبات زينة داخلي"><span class="product-name">نبات زينة داخلي</span><p class="product-description">يضيف لمسة من الجمال الطبيعي والحيوية إلى أي مكان.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 97.5 دينار عراقي</span> <br>السعر: 75 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="مصباح مكتبي LED قابل للتعديل" data-price="120" data-image-id="114" data-category="home" data-description="يوفر إضاءة مثالية للقراءة والعمل مع إمكانية تعديل السطوع."><img src="https://picsum.photos/id/114/300/150" alt="مصباح مكتبي LED قابل للتعديل"><span class="product-name">مصباح مكتبي LED قابل للتعديل</span><p class="product-description">يوفر إضاءة مثالية للقراءة والعمل مع إمكانية تعديل السطوع.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 156 دينار عراقي</span> <br>السعر: 120 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="وسادة طبية مريحة" data-price="135" data-image-id="115" data-category="home" data-description="مصممة لتوفير أقصى درجات الراحة والدعم لرقبتك أثناء النوم."><img src="https://picsum.photos/id/115/300/150" alt="وسادة طبية مريحة"><span class="product-name">وسادة طبية مريحة</span><p class="product-description">مصممة لتوفير أقصى درجات الراحة والدعم لرقبتك أثناء النوم.</p><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 175.5 دينار عراقي</span> <br>السعر: 135 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="خلاط كهربائي قوي" data-price="190" data-image-id="117" data-category="home" data-description="خلاط عالي الأداء لتحضير العصائر والصلصات والمخفوقات بسهولة."><img src="https://picsum.photos/id/117/300/150" alt="خلاط كهربائي قوي"><span class="product-name">خلاط كهربائي قوي</span><p class="product-description">خلاط عالي الأداء لتحضير العصائر والصلصات والمخفوقات بسهولة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 247 دينار عراقي</span> <br>السعر: 190 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="حقيبة ظهر عصرية للسفر" data-price="180" data-image-id="106" data-category="fashion" data-description="حقيبة أنيقة وعملية بتصميم عصري ومساحة تخزين كبيرة."><img src="https://picsum.photos/id/106/300/150" alt="حقيبة ظهر عصرية للسفر"><span class="product-name">حقيبة ظهر عصرية للسفر</span><p class="product-description">حقيبة أنيقة وعملية بتصميم عصري ومساحة تخزين كبيرة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 234 دينار عراقي</span> <br>السعر: 180 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="نظارات شمسية أنيقة" data-price="150" data-image-id="109" data-category="fashion" data-description="نظارات بتصميم جذاب وحماية ممتازة من أشعة الشمس."><img src="https://picsum.photos/id/109/300/150" alt="نظارات شمسية أنيقة"><span class="product-name">نظارات شمسية أنيقة</span><p class="product-description">نظارات بتصميم جذاب وحماية ممتازة من أشعة الشمس."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 195 دينار عراقي</span> <br>السعر: 150 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="مجموعة العناية بالبشرة الطبيعية" data-price="280" data-image-id="116" data-category="beauty" data-description="مجموعة متكاملة من المنتجات الطبيعية لتغذية وترطيب البشرة."><img src="https://picsum.photos/id/116/300/150" alt="مجموعة العناية بالبشرة الطبيعية"><span class="product-name">مجموعة العناية بالبشرة الطبيعية</span><p class="product-description">مجموعة متكاملة من المنتجات الطبيعية لتغذية وترطيب البشرة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 364 دينار عراقي</span> <br>السعر: 280 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="كتاب الطبخ العالمي" data-price="95" data-image-id="107" data-category="books" data-description="اكتشف وصفات متنوعة ولذيذة من مختلف المطابخ العالمية."><img src="https://picsum.photos/id/107/300/150" alt="كتاب الطبخ العالمي"><span class="product-name">كتاب الطبخ العالمي</span><p class="product-description">اكتشف وصفات متنوعة ولذيذة من مختلف المطابخ العالمية."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 123.5 دينار عراقي</span> <br>السعر: 95 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="ألبوم موسيقى كلاسيكية" data-price="60" data-image-id="119" data-category="books" data-description="استمتع بأروع المقطوعات الموسيقية الكلاسيكية الخالدة."><img src="https://picsum.photos/id/119/300/150" alt="ألبوم موسيقى كلاسيكية"><span class="product-name">ألبوم موسيقى كلاسيكية</span><p class="product-description">استمتع بأروع المقطوعات الموسيقية الكلاسيكية الخالدة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 78 دينار عراقي</span> <br>السعر: 60 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="دراجة هوائية جبلية" data-price="1200" data-image-id="118" data-category="sports" data-description="دراجة قوية ومناسبة للطرق الوعرة والمغامرات الخارجية."><img src="https://picsum.photos/id/118/300/150" alt="دراجة هوائية جبلية"><span class="product-name">دراجة هوائية جبلية</span><p class="product-description">دراجة قوية ومناسبة للطرق الوعرة والمغامرات الخارجية."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 1560 دينار عراقي</span> <br>السعر: 1200 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="مجموعة أدوات يدوية شاملة" data-price="220" data-image-id="108" data-category="tools" data-description="مجموعة أساسية تحتوي على جميع الأدوات التي تحتاجها للمنزل."><img src="https://picsum.photos/id/108/300/150" alt="مجموعة أدوات يدوية شاملة"><span class="product-name">مجموعة أدوات يدوية شاملة</span><p class="product-description">مجموعة أساسية تحتوي على جميع الأدوات التي تحتاجها للمنزل."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 286 دينار عراقي</span> <br>السعر: 220 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="لوحة فنية جدارية" data-price="350" data-image-id="120" data-category="art" data-description="لوحة فنية تجريدية بألوان هادئة لتزيين الجدران."><img src="https://picsum.photos/id/120/300/150" alt="لوحة فنية جدارية"><span class="product-name">لوحة فنية جدارية</span><p class="product-description">لوحة فنية تجريدية بألوان هادئة لتزيين الجدران."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 455 دينار عراقي</span> <br>السعر: 350 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="منتج عصري" data-price="50" data-image-id="1011" data-category="other" data-description="منتج بتصميم حديث وعصري يناسب الأذواق المعاصرة."><img src="https://picsum.photos/id/1011/300/150" alt="صورة منتج عصري"><span class="product-name">منتج عصري</span><p class="product-description">منتج بتصميم حديث وعصري يناسب الأذواق المعاصرة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 65 دينار عراقي</span> <br>السعر: 50 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="منتج تقليدي" data-price="75" data-image-id="1025" data-category="other" data-description="منتج تقليدي مصنوع يدوياً بحرفية عالية وتفاصيل دقيقة."><img src="https://picsum.photos/id/1025/300/150" alt="صورة منتج تقليدي"><span class="product-name">منتج تقليدي</span><p class="product-description">منتج تقليدي مصنوع يدوياً بحرفية عالية وتفاصيل دقيقة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 97.5 دينار عراقي</span> <br>السعر: 75 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="منتج فاخر" data-price="150" data-image-id="1037" data-category="other" data-description="منتج فاخر يتميز بجودته العالية وتصميمه الحصري."><img src="https://picsum.photos/id/1037/300/150" alt="صورة منتج فاخر"><span class="product-name">منتج فاخر</span><p class="product-description">منتج فاخر يتميز بجودته العالية وتصميمه الحصري."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 195 دينار عراقي</span> <br>السعر: 150 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div><div class="product-item" data-product-name="منتج بسيط" data-price="30" data-image-id="1044" data-category="other" data-description="منتج عملي وبسيط يلبي احتياجاتك اليومية بكفاءة."><img src="https://picsum.photos/id/1044/300/150" alt="صورة منتج بسيط"><span class="product-name">منتج بسيط</span><p class="product-description">منتج عملي وبسيط يلبي احتياجاتك اليومية بكفاءة."><span class="product-price"><span style="text-decoration: line-through; color: #777;">السعر: 39 دينار عراقي</span> <br>السعر: 30 دينار عراقي</span><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div><textarea class="product-notes" placeholder="الملاحظات"></textarea></div></div><div class="order-summary" id="orderSummarySection"><button id="toggleSummaryButton" class="summary-toggle-button collapsed"><span>اكمال الطلب</span><i class="fas fa-chevron-down"></i></button><div id="collapsibleSummaryContent"><h2>تفاصيل الطلب</h2><div id="selectedItemsList" class="selected-items-list"></div><div id="freeDeliveryMessageSummary" class="free-delivery-message-summary" style="display: none;"></div><div id="deliveryFee" class="delivery-fee" style="display: none;"></div><div class="total-price" id="totalPrice">المجموع الإجمالي: 0 دينار عراقي</div><form id="myForm" action="https://script.google.com/macros/s/AKfycbwjNezT0uu8TcZIGroso0bH20WU7Y6OksnwxBxHe5wB55Dq5i5BQDYrf9plGTO6g6J-fw/exec" method="POST"><label for="name">الاسم:</label><input type="text" id="name" name="name" required><label for="email">البريد الإلكتروني:</label><input type="email" id="email" name="email" required><label for="message" style="display:none;">تفاصيل الطلب:</label><textarea id="message" name="message" rows="8" required readonly style="display:none;"></textarea><button type="submit">إرسال الطلب</button></form><div id="response"></div></div></div></div></div></div><div class="horizontal-categories" id="horizontalCategoryList"><button id="horizontalSearchIcon" class="search-icon-button" title="البحث عن منتج"><i class="fas fa-search"></i></button><div class="categories-scroll-wrapper"><button class="category-button active" data-category="all"><i class="fas fa-list"></i>الكل</button><button class="category-button" data-category="electronics"><i class="fas fa-laptop"></i>إلكترونيات</button><button class="category-button" data-category="home"><i class="fas fa-home"></i>منزل ومطبخ</button><button class="category-button" data-category="fashion"><i class="fas fa-tshirt"></i>موضة وإكسسوارات</button><button class="category-button" data-category="books"><i class="fas fa-book"></i>كتب وهوايات</button><button class="category-button" data-category="sports"><i class="fas fa-dumbbell"></i>رياضة</button><button class="category-button" data-category="tools"><i class="fas fa-tools"></i>أدوات</button><button class="category-button" data-category="beauty"><i class="fas fa-spa"></i>جمال وعناية</button><button class="category-button" data-category="art"><i class="fas fa-paint-brush"></i>فن وديكور</button></div></div><div id="freeDeliveryAlertOverlay" class="free-delivery-alert-overlay"><div class="free-delivery-alert-box"><button class="close-button" id="closeFreeDeliveryAlertButton">&times;</button><i class="fas fa-gift"></i><h3>تهانينا!</h3><p>لقد حصلت على توصيل مجاني!</p></div></div><div id="freeDeliveryLostOverlay" class="free-delivery-alert-overlay" style="background-color: rgba(0, 0, 0, 0.7);"> <div class="free-delivery-alert-box" style="background-color: var(--surface-color);"> <button class="close-button" id="closeFreeDeliveryLostAlertButton">&times;</button> <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: var(--danger-color); margin-bottom: 15px;"></i> <h3>نأسف!</h3> <p style="color: var(--danger-color); font-size: 1.3rem; font-weight: bold; margin-bottom: 0;">لقد فقدت التوصيل المجاني.</p> </div></div><div id="imageModalOverlay" class="image-modal-overlay"><div class="image-modal-content"><button class="modal-close-button" id="closeImageModalButton">&times;</button><img src="" alt="Enlarged Product Image" id="modalImage"><div class="image-modal-details"><h3 id="modalProductName"></h3><p class="modal-price"></p><p id="modalProductDescription" class="modal-description"></p><textarea id="modalProductNotes" class="product-notes" placeholder="الملاحظات"></textarea></div><div class="quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" id="modalQuantityInput" class="quantity-input" value="0" min="0"><button type="button" class="increase-quantity">+</button></div></div></div><div id="confirmDeleteModalOverlay" class="confirm-delete-modal-overlay"><div class="confirm-delete-modal-content"><h3>هل أنت متأكد من حذف المنتج؟</h3><div class="modal-buttons"><button id="modalConfirmDeleteYes" class="modal-confirm-yes">نعم، احذف</button><button id="modalConfirmDeleteNo" class="modal-confirm-no">إلغاء</button></div></div></div><script>let slideIndex=1;showSlides(slideIndex);let slideshowTimer=setInterval(()=>{plusSlides(1)},3000);const slideshowContainer=document.querySelector('.slideshow-container');slideshowContainer.addEventListener('mouseenter',()=>{clearInterval(slideshowTimer);});slideshowContainer.addEventListener('mouseleave',()=>{slideshowTimer=setInterval(()=>{plusSlides(1)},3000);});let startX=0;let isDragging=!1;slideshowContainer.addEventListener('mousedown',e=>{startX=e.clientX;isDragging=!0;slideshowContainer.style.cursor='grabbing';});slideshowContainer.addEventListener('touchstart',e=>{startX=e.touches[0].clientX;isDragging=!0;});slideshowContainer.addEventListener('mouseup',e=>{if(!isDragging)return;isDragging=!1;slideshowContainer.style.cursor='pointer';const endX=e.clientX;const deltaX=endX-startX;const threshold=50;if(Math.abs(deltaX)>threshold){if(deltaX>0){plusSlides(-1);}else{plusSlides(1);}}startX=0;});slideshowContainer.addEventListener('touchend',e=>{if(!isDragging)return;isDragging=!1;const endX=e.changedTouches[0].clientX;const deltaX=endX-startX;const threshold=50;if(Math.abs(deltaX)>threshold){if(deltaX>0){plusSlides(-1);}else{plusSlides(1);}}startX=0;});slideshowContainer.addEventListener('mousemove',e=>{if(!isDragging)return;e.preventDefault();});function plusSlides(n){showSlides(slideIndex+=n)}function currentSlide(n){showSlides(slideIndex=n)}function showSlides(n){let i;let slides=document.getElementsByClassName("mySlides");let dots=document.getElementsByClassName("dot");if(n>slides.length){slideIndex=1}if(n<1){slideIndex=slides.length}for(i=0;i<slides.length;i++){slides[i].classList.remove("active-slide");}for(i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(" active-dot","");}slides[slideIndex-1].classList.add("active-slide");dots[slideIndex-1].className+=" active-dot";}
const form=document.getElementById('myForm'),responseDiv=document.getElementById('response'),messageTextarea=document.getElementById('message'),productsGrid=document.getElementById('productsGrid'),totalPriceElement=document.getElementById('totalPrice'),selectedItemsList=document.getElementById('selectedItemsList'),miniOrderSummaryDiv=document.getElementById('miniOrderSummary'),toggleSummaryButton=document.getElementById('toggleSummaryButton'),searchInput=document.getElementById('searchInput'),sidebarProductSearchInput=document.getElementById('sidebarProductSearchInput'),sortSelect=document.getElementById('sortSelect'),sidebarCategoryList=document.getElementById('categoryList'),sidebarCategoryButtons=sidebarCategoryList.querySelectorAll('.category-button'),sidebar=document.getElementById('sidebar'),menuToggleButton=document.getElementById('menuToggleButton'),closeSidebarButton=document.getElementById('closeSidebarButton'),sidebarOverlay=document.getElementById('sidebarOverlay'),orderSummarySection=document.getElementById('orderSummarySection'),horizontalCategoryList=document.getElementById('horizontalCategoryList'),horizontalCategoryButtons=horizontalCategoryList.querySelectorAll('.category-button'),topControlsBar=document.getElementById('topControlsBar'),horizontalSearchIcon=document.getElementById('horizontalSearchIcon'),controlsAboveProducts=document.querySelector('.controls-above-products'),deliveryFeeElement=document.getElementById('deliveryFee'),freeDeliveryMessageSummaryElement=document.getElementById('freeDeliveryMessageSummary'),freeDeliveryAlertOverlay=document.getElementById('freeDeliveryAlertOverlay'),closeFreeDeliveryAlertButton=document.getElementById('closeFreeDeliveryAlertButton'),imageModalOverlay=document.getElementById('imageModalOverlay'),modalImage=document.getElementById('modalImage'),modalProductName=document.getElementById('modalProductName'),modalPrice=imageModalOverlay.querySelector('.modal-price'),modalNotes=document.getElementById('modalProductNotes'),closeImageModalButton=document.getElementById('closeImageModalButton'),modalQuantityInput=document.getElementById('modalQuantityInput'),modalDecreaseButton=imageModalOverlay.querySelector('.quantity-control .decrease-quantity'),modalIncreaseButton=imageModalOverlay.querySelector('.quantity-control .increase-quantity'),modalProductDescription=document.getElementById('modalProductDescription'),freeDeliveryLostOverlay=document.getElementById('freeDeliveryLostOverlay'),closeFreeDeliveryLostAlertButton=document.getElementById('closeFreeDeliveryLostAlertButton');
let previousTotalItemsCount=0;let greenFlashTimeout,redFlashTimeout;let currentCategory='all';const DELIVERY_FEE=5000;const FREE_DELIVERY_THRESHOLD=3;let hasTriggeredFreeDeliveryAlert=!1;let freeDeliveryAchieved=false;
let productToConfirmDelete=null;const confirmDeleteModalOverlayElement=document.getElementById('confirmDeleteModalOverlay'),modalConfirmDeleteYesButton=document.getElementById('modalConfirmDeleteYes'),modalConfirmDeleteNoButton=document.getElementById('modalConfirmDeleteNo');
const mainVoiceSearchButton=document.getElementById('mainVoiceSearchButton'),sidebarVoiceSearchButton=document.getElementById('sidebarVoiceSearchButton');let recognition=null;let isListening=!1;
if('webkitSpeechRecognition'in window||'SpeechRecognition'in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;recognition=new SpeechRecognition();recognition.continuous=!1;recognition.lang='ar-AE';recognition.interimResults=!1;recognition.maxAlternatives=1;
recognition.onstart=()=>{isListening=!0;mainVoiceSearchButton.classList.add('active');sidebarVoiceSearchButton.classList.add('active');console.log('Voice search started');};
recognition.onresult=(event)=>{const transcript=event.results[0][0].transcript;console.log('Speech recognized:',transcript);searchInput.value=transcript;sidebarProductSearchInput.value=transcript;filterAndSortProducts();isListening=!1;mainVoiceSearchButton.classList.remove('active');sidebarVoiceSearchButton.classList.remove('active');};
recognition.onerror=(event)=>{console.error('Speech recognition error:',event.error);isListening=!1;mainVoiceSearchButton.classList.remove('active');sidebarVoiceSearchButton.classList.remove('active');};
recognition.onend=()=>{isListening=!1;mainVoiceSearchButton.classList.remove('active');sidebarVoiceSearchButton.classList.remove('active');console.log('Voice search ended');};
mainVoiceSearchButton.addEventListener('click',()=>{if(isListening){recognition.stop();}else{recognition.start();}});
sidebarVoiceSearchButton.addEventListener('click',()=>{if(isListening){recognition.stop();}else{recognition.start();}});
}else{console.warn('Web Speech API is not supported in this browser.');mainVoiceSearchButton.style.display='none';sidebarVoiceSearchButton.style.display='none';}
function getSanitizedQuantity(val){let qty=parseInt(val);return isNaN(qty)||qty<0?0:qty;}
function getAllProductItems(){return document.querySelectorAll('.product-item')}function getVisibleProductItems(){return document.querySelectorAll('.product-item:not(.hidden)')}
function flashMiniSummary(isAdding){const targetElement=topControlsBar;if(!targetElement)return;clearTimeout(greenFlashTimeout);clearTimeout(redFlashTimeout);targetElement.classList.remove('item-added-glow','item-removed-flash');if(isAdding){targetElement.classList.add('item-added-glow');greenFlashTimeout=setTimeout(()=>{targetElement.classList.remove('item-added-glow');},300);}else{targetElement.classList.add('item-removed-flash');redFlashTimeout=setTimeout(()=>{targetElement.classList.remove('item-removed-flash');},300);}}
function flashButton(button,isAdding){const flashClass=isAdding?'flash-green':'flash-red';const existingTimeoutId=button.dataset.flashTimeoutId;if(existingTimeoutId){clearTimeout(existingTimeoutId);button.classList.remove('flash-green','flash-red');}requestAnimationFrame(()=>{button.classList.add(flashClass);const newTimeoutId=setTimeout(()=>{button.classList.remove(flashClass);delete button.dataset.flashTimeoutId;},200);button.dataset.flashTimeoutId=newTimeoutId;});}
function showFreeDeliveryAlert(){if(!freeDeliveryAlertOverlay.classList.contains('visible')){freeDeliveryAlertOverlay.classList.add('visible');freeDeliveryAchieved=true;}}
function hideFreeDeliveryAlert(){freeDeliveryAlertOverlay.classList.remove('visible');freeDeliveryAchieved=false;}
function showFreeDeliveryLostAlert(){if(!freeDeliveryLostOverlay.classList.contains('visible')){freeDeliveryLostOverlay.classList.add('visible');freeDeliveryAchieved=false;}}
function hideFreeDeliveryLostAlert(){freeDeliveryLostOverlay.classList.remove('visible');}
closeFreeDeliveryLostAlertButton.addEventListener('click', hideFreeDeliveryLostAlert);
freeDeliveryLostOverlay.addEventListener('click', function(event) {
    if (event.target === freeDeliveryLostOverlay) {
        hideFreeDeliveryLostAlert();
    }
});
function showImageModal(imageUrl, productName){
    const mainProductItem = document.querySelector(`.product-item[data-product-name="${productName}"]`);
    if (!mainProductItem) return;
    const price = mainProductItem.dataset.price;
    const description = mainProductItem.dataset.description || '';
    const currentQty = mainProductItem.querySelector('.quantity-input').value;
    const currentNotesInput = mainProductItem.querySelector('.product-notes');
    const currentNotes = currentNotesInput ? currentNotesInput.value.trim() : '';

    modalImage.src = imageUrl;
    modalProductName.textContent = productName;
    modalPrice.innerHTML = `<span style="text-decoration: line-through; color: #777;">السعر: ${(parseFloat(price) * 1.3).toFixed(1)} دينار عراقي</span> <br>السعر: ${price} دينار عراقي`;
    modalProductDescription.textContent = description;
    modalQuantityInput.value = currentQty;
    if (modalNotes) {
        modalNotes.value = currentNotes;
        modalNotes.style.display = 'block';
    }

    imageModalOverlay.dataset.productName = productName;
    imageModalOverlay.classList.add('visible');
}

function hideImageModal(){
    imageModalOverlay.classList.remove('visible');
    modalImage.src = '';
    modalProductName.textContent = '';
    modalPrice.textContent = '';
    modalProductDescription.textContent = '';
    if (modalNotes) modalNotes.value = '';
    modalQuantityInput.value = 0;
    imageModalOverlay.removeAttribute('data-product-name');
}

function updateMiniOrderSummaryContent(activeItemsCount,activeTotalPrice){if(activeItemsCount>previousTotalItemsCount){flashMiniSummary(!0);}else if(activeItemsCount<previousTotalItemsCount){flashMiniSummary(!1);}previousTotalItemsCount=activeItemsCount;if(activeItemsCount===0){miniOrderSummaryDiv.innerHTML='<i class="fas fa-shopping-cart"></i><span>اترس بيتك بدون ما تفرغ جيبك !</span>';miniOrderSummaryDiv.classList.add('empty-state');}else{miniOrderSummaryDiv.innerHTML=`<i class="fas fa-shopping-cart"></i><span>إجمالي القطع : ${activeItemsCount}</span> | <span>المجموع: ${activeTotalPrice} دينار عراقي</span>`;miniOrderSummaryDiv.classList.remove('empty-state');}
if(activeItemsCount>=FREE_DELIVERY_THRESHOLD&&!hasTriggeredFreeDeliveryAlert){showFreeDeliveryAlert();hasTriggeredFreeDeliveryAlert=!0;freeDeliveryAchieved=true;}else if(activeItemsCount<FREE_DELIVERY_THRESHOLD&&freeDeliveryAchieved){showFreeDeliveryLostAlert();hasTriggeredFreeDeliveryAlert=false;freeDeliveryAchieved=false;}else if(activeItemsCount<FREE_DELIVERY_THRESHOLD){hasTriggeredFreeDeliveryAlert=false;freeDeliveryAchieved=false;}}
function updateOrderSummary(){let msgContent="تفاصيل الطلب (للنظام):\n";let subtotal=0;let hasSelectedAndActive=!0;let totalQuantityOfActiveItems=0;selectedItemsList.querySelectorAll('.summary-item').forEach(item=>{const quantityInputInSummary=item.querySelector('.quantity-input.summary-list-quantity-input');const quantity=getSanitizedQuantity(quantityInputInSummary.value);if(quantity>0){const productName=item.dataset.productName;const productPrice=parseFloat(item.dataset.price);const notesText=item.querySelector('.item-notes')?item.querySelector('.item-notes').textContent.replace('الملاحظات: ','').trim():'';const itemSubtotal=productPrice*quantity;if(item.dataset.suspended!=='true'){totalQuantityOfActiveItems+=quantity;subtotal+=itemSubtotal;msgContent+=`- ${productName} (الكمية: ${quantity}, السعر للوحدة: ${productPrice} دينار عراقي, المجموع الفرعي: ${itemSubtotal} دينار عراقي)\n`;if(notesText){msgContent+=`  الملاحظات: ${notesText}\n`;}}}});if(totalQuantityOfActiveItems===0){msgContent="لم يتم اختيار أي منتجات نشطة بعد.\n";hasSelectedAndActive=!1;}
let deliveryFee=0;if(totalQuantityOfActiveItems>0&&totalQuantityOfActiveItems<FREE_DELIVERY_THRESHOLD){deliveryFee=DELIVERY_FEE;deliveryFeeElement.textContent=`رسوم التوصيل: ${deliveryFee} دينار عراقي`;deliveryFeeElement.style.display='block';freeDeliveryMessageSummaryElement.style.display='none';}else if(totalQuantityOfActiveItems>=FREE_DELIVERY_THRESHOLD){deliveryFee=0;deliveryFeeElement.style.display='none';freeDeliveryMessageSummaryElement.textContent='مبروك! لقد حصلت على توصيل مجاني!';freeDeliveryMessageSummaryElement.style.display='block';}else{deliveryFee=0;deliveryFeeElement.style.display='none';freeDeliveryMessageSummaryElement.style.display='none';}
let total=subtotal+deliveryFee;if(deliveryFee>0){msgContent+=`رسوم التوصيل: ${deliveryFee} دينار عراقي\n`;}else if(totalQuantityOfActiveItems>=FREE_DELIVERY_THRESHOLD){msgContent+=`التوصيل: مجاني\n`;}msgContent+=`\nالمجموع الإجمالي للطلب (المنتجات النشطة): ${total} دينار عراقي`;messageTextarea.value=msgContent.trim();totalPriceElement.textContent=`المجموع الإجمالي: ${total} دينار عراقي`;updateMiniOrderSummaryContent(totalQuantityOfActiveItems,total);const hasAnyItemsInSummary=selectedItemsList.querySelectorAll('.summary-item').length>0&&Array.from(selectedItemsList.querySelectorAll('.summary-item .quantity-input')).some(inp=>getSanitizedQuantity(inp.value)>0);if(!hasAnyItemsInSummary){orderSummarySection.classList.remove('open');toggleSummaryButton.classList.add('collapsed');}}
function renderOrderSummary(){let hasSelected=!1;const suspendedProductStates={};selectedItemsList.querySelectorAll('.summary-item').forEach(existingSummaryItemNode=>{const productNameKey=existingSummaryItemNode.dataset.productName;if(existingSummaryItemNode.dataset.suspended==='true'){suspendedProductStates[productNameKey]=!0;}});selectedItemsList.innerHTML='';getAllProductItems().forEach(item=>{const productName=item.dataset.productName;const productPrice=parseFloat(item.dataset.price);const productImageId=item.dataset.imageId;const quantityInput=item.querySelector('.quantity-input');const quantity=getSanitizedQuantity(quantityInput.value);const notesInput=item.querySelector('.product-notes');const notesText=notesInput?notesInput.value.trim():'';if(quantity>0){hasSelected=!0;const itemSubtotal=productPrice*quantity;const isSuspended=suspendedProductStates[productName]===!0;let actionButtonsHtml='';if(isSuspended){actionButtonsHtml=`<button type="button" class="undo-suspend-button" data-product-name="${productName}" title="العودة عن الإيقاف"><i class="fas fa-undo-alt"></i></button><button type="button" class="confirm-final-delete-button" data-product-name="${productName}" title="حذف المنتج نهائياً"><i class="fas fa-trash-alt"></i></button>`;}else{actionButtonsHtml=`<button type="button" class="suspend-item-button" data-product-name="${productName}" title="إيقاف المنتج"><i class="fas fa-ban"></i></button>`;}
const summaryItemHtml=`<div class="summary-item ${isSuspended?'item-suspended':''}" data-product-name="${productName}" data-price="${productPrice}" ${isSuspended?'data-suspended="true"':''}><img src="https://picsum.photos/id/${productImageId}/50/50" alt="${productName}"/><div class="summary-item-details"><span class="item-name">${productName}</span><span class="item-quantity">الكمية: ${quantity}</span><span class="item-subtotal">الإجمالي الفرعي: ${itemSubtotal} دينار عراقي</span>${notesText?`<span class="item-notes" style="font-size:.85em; color: var(--subtle-text-color);">الملاحظات: ${notesText}</span>`:''}</div><div class="quantity-control summary-quantity-control"><button type="button" class="decrease-quantity">-</button><input type="number" class="quantity-input summary-list-quantity-input" value="${quantity}" min="0" data-product-name="${productName}"><button type="button" class="increase-quantity">+</button></div><div class="item-actions">${actionButtonsHtml}</div></div>`;selectedItemsList.innerHTML+=summaryItemHtml;}});if(!hasSelected){selectedItemsList.innerHTML='<p style="text-align: center; color: var(--subtle-text-color);">لم يتم اختيار أي منتجات بعد.</p>';}updateOrderSummary();}
function filterAndSortProducts(){const searchTerm=searchInput.value.toLowerCase().trim();const selectedCategory=currentCategory;getAllProductItems().forEach(item=>{const productName=item.dataset.productName.toLowerCase();const productCategory=item.dataset.category;const productDescription=item.dataset.description?item.dataset.description.toLowerCase():'';const matchesSearch=searchTerm===''||productName.includes(searchTerm)||productDescription.includes(searchTerm);const matchesCategory=selectedCategory==='all'||productCategory===selectedCategory;if(matchesSearch&&matchesCategory){item.classList.remove('hidden');}else{item.classList.add('hidden');}});sortProducts();}
function sortProducts(){const sortBy=sortSelect.value;const productItemsArray=Array.from(getVisibleProductItems());productItemsArray.sort((a,b)=>{const nameA=a.dataset.productName.toLowerCase();const nameB=b.dataset.productName.toLowerCase();const priceA=parseFloat(a.dataset.price);const priceB=parseFloat(b.dataset.price);if(sortBy==='price-asc'){return priceA-priceB;}else if(sortBy==='price-desc'){return priceB-priceA;}else if(sortBy==='name-asc'){return nameA.localeCompare(nameB,'ar',{sensitivity:'base'});}else if(sortBy==='name-desc'){return nameB.localeCompare(nameA,'ar',{sensitivity:'base'});}else{return 0;}});productItemsArray.forEach(item=>{productsGrid.appendChild(item);});}
productsGrid.addEventListener('click', function(event) {
    const target = event.target;
    const productItem = target.closest('.product-item');

    if (!productItem) return;

    const isInteractiveControl = target.classList.contains('decrease-quantity') ||
                                 target.classList.contains('increase-quantity') ||
                                 target.classList.contains('quantity-input') ||
                                 target.classList.contains('product-notes');

    if (isInteractiveControl) {
        if (target.classList.contains('decrease-quantity') || target.classList.contains('increase-quantity')) {
             const qtyInput = productItem.querySelector('.quantity-input');
             let currentQty = getSanitizedQuantity(qtyInput.value);
             if (target.classList.contains('decrease-quantity')) {
                 if (currentQty > 0) {
                     currentQty--;
                     flashButton(target, false);
                 }
             } else if (target.classList.contains('increase-quantity')) {
                 currentQty++;
                 flashButton(target, true);
             }
             qtyInput.value = currentQty;
             renderOrderSummary();
         }
        return;
    }

    const productName = productItem.dataset.productName;
    const productImage = productItem.querySelector('img');
    const productImageSrc = productImage ? productImage.src : '';

    showImageModal(productImageSrc, productName);
});

productsGrid.addEventListener('input',function(event){const target=event.target;if(target.classList.contains('quantity-input')||target.classList.contains('product-notes')){clearTimeout(target.inputTimeout);target.inputTimeout=setTimeout(()=>{if(target.classList.contains('quantity-input'))target.value=getSanitizedQuantity(target.value);renderOrderSummary();},200);}});
productsGrid.addEventListener('change',function(event){const target=event.target;if(target.classList.contains('quantity-input')||target.classList.contains('product-notes')){if(target.classList.contains('quantity-input'))target.value=getSanitizedQuantity(target.value);renderOrderSummary();}});
selectedItemsList.addEventListener('click',function(event){const target=event.target;const button=target.closest('button');if(!button)return;const summaryItem=button.closest('.summary-item');if(!summaryItem)return;const productName=summaryItem.dataset.productName;if(!productName)return;if(button.classList.contains('suspend-item-button')){summaryItem.dataset.suspended='true';renderOrderSummary();}else if(button.classList.contains('undo-suspend-button')){summaryItem.removeAttribute('data-suspended');renderOrderSummary();}else if(button.classList.contains('confirm-final-delete-button')){showConfirmDeleteModal(productName);}else if(button.classList.contains('increase-quantity')||button.classList.contains('decrease-quantity')){const mainProdItem=document.querySelector(`.product-item[data-product-name="${productName}"]`);if(mainProdItem){const mainQtyInput=mainProdItem.querySelector('.quantity-input');let currentMainQty=getSanitizedQuantity(mainQtyInput.value);if(button.classList.contains('increase-quantity')){currentMainQty++;flashButton(button,!0);}else if(button.classList.contains('decrease-quantity')){if(currentMainQty>0){currentMainQty--;flashButton(button,!1);}}mainQtyInput.value=currentMainQty;if(currentMainQty===0){summaryItem.removeAttribute('data-suspended');}renderOrderSummary();}}});
selectedItemsList.addEventListener('input',function(event){const target=event.target;if(target.classList.contains('quantity-input')&&target.classList.contains('summary-list-quantity-input')){clearTimeout(target.inputTimeout);target.inputTimeout=setTimeout(()=>{const summaryItem=target.closest('.summary-item');if(!summaryItem)return;const productName=summaryItem.dataset.productName;const newQty=getSanitizedQuantity(target.value);const mainProdItem=document.querySelector(`.product-item[data-product-name="${productName}"]`);if(mainProdItem){const mainQtyInput=mainProdItem.querySelector('.quantity-input');mainQtyInput.value=newQty;}if(newQty===0){summaryItem.removeAttribute('data-suspended');}renderOrderSummary();},300);}});
selectedItemsList.addEventListener('change',function(event){const target=event.target;if(target.classList.contains('quantity-input')&&target.classList.contains('summary-list-quantity-input')){target.value=getSanitizedQuantity(target.value);const summaryItem=target.closest('.summary-item');if(!summaryItem)return;const productName=summaryItem.dataset.productName;const newQty=getSanitizedQuantity(target.value);const mainProdItem=document.querySelector(`.product-item[data-product-name="${productName}"]`);if(mainProdItem){const mainQtyInput=mainProdItem.querySelector('.quantity-input');mainQtyInput.value=newQty;}if(newQty===0){summaryItem.removeAttribute('data-suspended');}renderOrderSummary();}});
modalConfirmDeleteYesButton.addEventListener('click',handleConfirmDeleteYes);modalConfirmDeleteNoButton.addEventListener('click',hideConfirmDeleteModal);confirmDeleteModalOverlayElement.addEventListener('click',(event)=>{if(event.target===confirmDeleteModalOverlayElement){hideConfirmDeleteModal();}});
function showConfirmDeleteModal(productName){productToConfirmDelete=productName;if(confirmDeleteModalOverlayElement){confirmDeleteModalOverlayElement.classList.add('visible');}}
function hideConfirmDeleteModal(){if(confirmDeleteModalOverlayElement){confirmDeleteModalOverlayElement.classList.remove('visible');}productToConfirmDelete=null;}
function handleConfirmDeleteYes(){if(productToConfirmDelete){const mainProdItem=document.querySelector(`.product-item[data-product-name="${productToConfirmDelete}"]`);if(mainProdItem){const mainQtyInput=mainProdItem.querySelector('.quantity-input');const notesInput=mainProdItem.querySelector('.product-notes');mainQtyInput.value='0';if(notesInput)notesInput.value='';const summaryItemInList=selectedItemsList.querySelector(`.summary-item[data-product-name="${productToConfirmDelete}"]`);if(summaryItemInList){summaryItemInList.remove();}}renderOrderSummary();hideConfirmDeleteModal();}}
form.addEventListener('submit',function(event){event.preventDefault();let totalActiveItemsForSubmit=0;selectedItemsList.querySelectorAll('.summary-item').forEach(item=>{const quantityInput=item.querySelector('.quantity-input.summary-list-quantity-input');if(quantityInput&&getSanitizedQuantity(quantityInput.value)>0&&item.dataset.suspended!=='true'){totalActiveItemsForSubmit+=getSanitizedQuantity(quantityInput.value);}});if(totalActiveItemsForSubmit===0){responseDiv.textContent='الرجاء إضافة منتجات (نشطة) إلى السلة قبل إرسال الطلب.';responseDiv.className='error';return;}
const formData=new FormData(form);const data=new URLSearchParams(formData).toString();const webAppUrl=form.action;responseDiv.textContent='جاري الإرسال...';responseDiv.className='';fetch(webAppUrl,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded',},body:data,}).then(response=>{if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}return response.json();}).then(result=>{if(result.result==='success'){responseDiv.textContent='تم إرسال الطلب بنجاح!';responseDiv.className='success';form.reset();getAllProductItems().forEach(item=>{item.querySelector('.quantity-input').value='0';const notesInput=item.querySelector('.product-notes');if(notesInput)notesInput.value='';});hasTriggeredFreeDeliveryAlert=!1;previousTotalItemsCount=0;renderOrderSummary();hideFreeDeliveryAlert();searchInput.value='';sidebarProductSearchInput.value='';sortSelect.value='default';selectCategory('all');closeSidebar();orderSummarySection.classList.remove('open');toggleSummaryButton.classList.add('collapsed');freeDeliveryAchieved=false;}else{responseDiv.textContent='حدث خطأ أثناء الإرسال: '+(result.message||'خطأ غير معروف.');responseDiv.className='error';}}).catch(error=>{responseDiv.textContent='حدث خطأ أثناء الاتصال: '+error.message;responseDiv.className='error';});});
searchInput.addEventListener('input',function(){sidebarProductSearchInput.value=this.value;filterAndSortProducts();});
sidebarProductSearchInput.addEventListener('input',function(){searchInput.value=this.value;filterAndSortProducts();});
sortSelect.addEventListener('change',sortProducts);
function selectCategory(category){currentCategory=category;sidebarCategoryButtons.forEach(button=>{if(button.dataset.category===category){button.classList.add('active');}else{button.classList.remove('active');}});horizontalCategoryButtons.forEach(button=>{if(button.dataset.category===category){button.classList.add('active');}else{button.classList.remove('active');}});filterAndSortProducts();closeSidebar();}
sidebarCategoryList.addEventListener('click',function(event){const target=event.target;if(target.classList.contains('category-button')){const category=target.dataset.category;if(category){selectCategory(category);searchInput.value='';sidebarProductSearchInput.value='';if(controlsAboveProducts){controlsAboveProducts.scrollIntoView({behavior:'smooth',block:'start'});}}}});
horizontalCategoryList.addEventListener('click',function(event){const target=event.target.closest('.category-button');if(target){const category=target.dataset.category;if(category){selectCategory(category);searchInput.value='';sidebarProductSearchInput.value='';if(controlsAboveProducts){controlsAboveProducts.scrollIntoView({behavior:'smooth',block:'start'});}}}});
toggleSummaryButton.addEventListener('click',function(){orderSummarySection.classList.toggle('open');toggleSummaryButton.classList.toggle('collapsed');if(orderSummarySection.classList.contains('open')){orderSummarySection.scrollIntoView({behavior:'smooth',block:'start'});}});
miniOrderSummaryDiv.addEventListener('click',function(){if(!orderSummarySection.classList.contains('open')){orderSummarySection.classList.add('open');toggleSummaryButton.classList.remove('collapsed');}setTimeout(()=>{orderSummarySection.scrollIntoView({behavior:'smooth',block:'start'});},500);});
function openSidebar(){sidebar.classList.add('open');sidebarOverlay.classList.add('visible');menuToggleButton.style.display='none';horizontalCategoryList.classList.add('hidden-bar');miniOrderSummaryDiv.style.display='none';}
function closeSidebar(){sidebar.classList.remove('open');sidebarOverlay.classList.remove('visible');menuToggleButton.style.display='flex';horizontalCategoryList.classList.remove('hidden-bar');miniOrderSummaryDiv.style.display='flex';}
menuToggleButton.addEventListener('click',openSidebar);closeSidebarButton.addEventListener('click',closeSidebar);sidebarOverlay.addEventListener('click',closeSidebar);
document.addEventListener('click',function(event){const isClickInsideSidebar=sidebar.contains(event.target);const isClickOnToggleButton=menuToggleButton.contains(event.target);const isClickInsideAlert=freeDeliveryAlertOverlay.contains(event.target);const isClickInsideImageModal=imageModalOverlay.contains(event.target);const isClickInsideSummary=orderSummarySection.contains(event.target);if(!isClickInsideSidebar&&!isClickOnToggleButton&&sidebar.classList.contains('open')&&!isClickInsideAlert&&!isClickInsideImageModal&&!isClickInsideSummary){closeSidebar();}});
document.body.addEventListener('click',function(event){if(event.target.classList.contains('quantity-input')){event.target.select();}});
horizontalSearchIcon.addEventListener('click',()=>{const searchInput=document.getElementById('searchInput');if(searchInput&&controlsAboveProducts){controlsAboveProducts.scrollIntoView({behavior:'smooth',block:'start'});setTimeout(()=>{searchInput.focus();},300);}});
closeFreeDeliveryAlertButton.addEventListener('click',hideFreeDeliveryAlert);freeDeliveryAlertOverlay.addEventListener('click',function(event){if(event.target===freeDeliveryAlertOverlay){hideFreeDeliveryAlert();}});
closeImageModalButton.addEventListener('click',hideImageModal);imageModalOverlay.addEventListener('click',function(event){if(event.target===imageModalOverlay||event.target===modalImage||event.target.closest('.image-modal-content button.modal-close-button')){hideImageModal();}});

imageModalOverlay.addEventListener('click', function(event) {
    const target = event.target;
    if (target.classList.contains('decrease-quantity') || target.classList.contains('increase-quantity')) {
        const modalQtyInput = imageModalOverlay.querySelector('#modalQuantityInput');
        let currentQty = getSanitizedQuantity(modalQtyInput.value);
        const productName = imageModalOverlay.dataset.productName;
        const mainProductItem = document.querySelector(`.product-item[data-product-name="${productName}"]`);
        const mainQtyInput = mainProductItem ? mainProductItem.querySelector('.quantity-input') : null;

        if (!mainQtyInput) return;

        if (target.classList.contains('decrease-quantity')) {
            if (currentQty > 0) {
                currentQty--;
                flashButton(target, false);
            }
        } else if (target.classList.contains('increase-quantity')) {
            currentQty++;
            flashButton(target, true);
        }
        modalQtyInput.value = currentQty;
        mainQtyInput.value = currentQty;
        renderOrderSummary();
    }
});

imageModalOverlay.addEventListener('input', function(event) {
    const target = event.target;
    const productName = imageModalOverlay.dataset.productName;
    const mainProductItem = document.querySelector(`.product-item[data-product-name="${productName}"]`);
    if (!mainProductItem) return;

    if (target.classList.contains('quantity-input') && target.id === 'modalQuantityInput') {
        clearTimeout(target.inputTimeout);
        target.inputTimeout = setTimeout(() => {
            const newQty = getSanitizedQuantity(target.value);
            target.value = newQty;
            const mainQtyInput = mainProductItem.querySelector('.quantity-input');
            mainQtyInput.value = newQty;
            renderOrderSummary();
        }, 200);
    }
    else if (target.classList.contains('product-notes') && target.id === 'modalProductNotes') {
         clearTimeout(target.inputTimeout);
        target.inputTimeout = setTimeout(() => {
            const mainNotesInput = mainProductItem.querySelector('.product-notes');
            if (mainNotesInput) {
                mainNotesInput.value = target.value.trim();
                renderOrderSummary();
            }
        }, 200);
    }
});

imageModalOverlay.addEventListener('change', function(event) {
     const target = event.target;
     const productName = imageModalOverlay.dataset.productName;
     const mainProductItem = document.querySelector(`.product-item[data-product-name="${productName}"]`);
     if (!mainProductItem) return;

     if (target.classList.contains('quantity-input') && target.id === 'modalQuantityInput') {
        const newQty = getSanitizedQuantity(target.value);
        target.value = newQty;
        const mainQtyInput = mainProductItem.querySelector('.quantity-input');
        mainQtyInput.value = newQty;
        renderOrderSummary();
     }
     else if (target.classList.contains('product-notes') && target.id === 'modalProductNotes') {
        const mainNotesInput = mainProductItem.querySelector('.product-notes');
        if (mainNotesInput) {
             mainNotesInput.value = target.value.trim();
             renderOrderSummary();
         }
     }
});


let lastScrollTop=0;const scrollThreshold=50;function handleScroll(){const scrollTop=window.scrollY||document.documentElement.scrollTop;const isSidebarOpen=sidebar.classList.contains('open');if(!isSidebarOpen){if(scrollTop>scrollThreshold){horizontalCategoryList.classList.remove('hidden-bar');}else{horizontalCategoryList.classList.add('hidden-bar');}}lastScrollTop=scrollTop;}window.addEventListener('scroll',handleScroll);
document.addEventListener('DOMContentLoaded',()=>{if(window.scrollY<=scrollThreshold){horizontalCategoryList.classList.add('hidden-bar');}setTimeout(()=>{window.scrollTo(0,0);},10);renderOrderSummary();filterAndSortProducts();});</script></body></html>
